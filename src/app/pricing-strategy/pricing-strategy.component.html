<div class="pricing-strategy-container">
  <div class="header">
    <div class="header-content">
      <div class="title-section">
        <h1>{{ translate('pricing.title') }}</h1>
        <p>{{ translate('pricing.subtitle') }}</p>
      </div>
      <div class="language-selector">
        <button mat-button [matMenuTriggerFor]="languageMenu" class="language-button">
          <mat-icon>language</mat-icon>
          {{ getCurrentLanguage() === 'de' ? 'Deutsch' : 'English' }}
          <mat-icon>arrow_drop_down</mat-icon>
        </button>
        <mat-menu #languageMenu="matMenu">
          <button mat-menu-item (click)="setLanguage('de')" [class.selected]="getCurrentLanguage() === 'de'">
            <span>üá©üá™ Deutsch</span>
          </button>
          <button mat-menu-item (click)="setLanguage('en')" [class.selected]="getCurrentLanguage() === 'en'">
            <span>üá∫üá∏ English</span>
          </button>
        </mat-menu>
      </div>
    </div>
  </div>

  <!-- Progress Indicator -->
  <div class="progress-container">
    <div class="progress-steps">
      <div class="step" *ngFor="let phase of phases; let i = index" 
           [class.active]="isPhaseActive(i)" 
           [class.completed]="isPhaseCompleted(i)"
           (click)="jumpToPhase(i)">
        <div class="step-number">{{ i + 1 }}</div>
        <div class="step-label">{{ phase }}</div>
      </div>
    </div>
    <div class="progress-bar">
      <div class="progress-fill" [style.width.%]="getProgressPercent()"></div>
    </div>
  </div>

  <!-- Phase 1: System-√úbersicht -->
  <div class="phase" *ngIf="currentPhase === 0">
    <mat-card class="strategy-card">
      <mat-card-header>
        <mat-card-title>{{ translate('pricing.systemOverview.title') }}</mat-card-title>
        <mat-card-subtitle>{{ translate('pricing.systemOverview.subtitle') }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content [formGroup]="pricingForm">
        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ translate('pricing.systemName') }}</mat-label>
            <input matInput formControlName="systemName" required>
            <mat-error *ngIf="pricingForm.get('systemName')?.invalid && pricingForm.get('systemName')?.touched">
              {{ translate('pricing.systemNameError') }}
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-group">
          <label class="form-label">{{ translate('pricing.autonomyLevel') }} *</label>
          <mat-radio-group formControlName="autonomy" class="radio-group" required>
            <div class="radio-option" [class.selected]="pricingForm.get('autonomy')?.value === 'assistive'" (click)="pricingForm.get('autonomy')?.setValue('assistive')">
              <mat-radio-button value="assistive" (click)="$event.stopPropagation()">
                <div class="radio-text" (click)="pricingForm.get('autonomy')?.setValue('assistive')">
                  <strong>{{ translate('pricing.autonomy.assistive') }}</strong>
                  <small>{{ translate('pricing.autonomy.assistiveDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('autonomy')?.value === 'augmentative'" (click)="pricingForm.get('autonomy')?.setValue('augmentative')">
              <mat-radio-button value="augmentative" (click)="$event.stopPropagation()">
                <div class="radio-text" (click)="pricingForm.get('autonomy')?.setValue('augmentative')">
                  <strong>{{ translate('pricing.autonomy.augmentative') }}</strong>
                  <small>{{ translate('pricing.autonomy.augmentativeDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('autonomy')?.value === 'autonomous'" (click)="pricingForm.get('autonomy')?.setValue('autonomous')">
              <mat-radio-button value="autonomous" (click)="$event.stopPropagation()">
                <div class="radio-text" (click)="pricingForm.get('autonomy')?.setValue('autonomous')">
                  <strong>{{ translate('pricing.autonomy.autonomous') }}</strong>
                  <small>{{ translate('pricing.autonomy.autonomousDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
          </mat-radio-group>
          <mat-error *ngIf="pricingForm.get('autonomy')?.invalid && pricingForm.get('autonomy')?.touched">
            Bitte w√§hlen Sie ein Autonomie-Level
          </mat-error>
        </div>

        <!-- Kosteneingaben -->
        <mat-divider style="margin: 20px 0;"></mat-divider>
        <h3>{{ translate('pricing.costInputs') }}</h3>
        
        <div class="costs-grid">
          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>{{ translate('pricing.developmentCosts') }} *</mat-label>
              <input matInput type="number" formControlName="developmentCosts" required>
              <span matSuffix>‚Ç¨</span>
              <mat-icon matSuffix [matTooltip]="translate('pricing.developmentCostsTooltip')">info</mat-icon>
              <mat-error *ngIf="pricingForm.get('developmentCosts')?.invalid && pricingForm.get('developmentCosts')?.touched">
                Bitte geben Sie die Entwicklungskosten ein
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>{{ translate('pricing.costPerUsage') }} *</mat-label>
              <input matInput type="number" formControlName="costPerUsage" required>
              <span matSuffix>‚Ç¨</span>
              <mat-icon matSuffix [matTooltip]="translate('pricing.costPerUsageTooltip')">info</mat-icon>
              <mat-error *ngIf="pricingForm.get('costPerUsage')?.invalid && pricingForm.get('costPerUsage')?.touched">
                Bitte geben Sie die Kosten pro Nutzung ein
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Wartungskosten *</mat-label>
              <input matInput type="number" formControlName="maintenanceCosts" required>
              <span matSuffix>‚Ç¨</span>
              <mat-icon matSuffix matTooltip="J√§hrliche Wartungskosten">info</mat-icon>
              <mat-error *ngIf="pricingForm.get('maintenanceCosts')?.invalid && pricingForm.get('maintenanceCosts')?.touched">
                Bitte geben Sie die Wartungskosten ein
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Erwartete F√§lle pro Jahr *</mat-label>
              <input matInput type="number" formControlName="expectedCasesPerYear" required>
              <mat-icon matSuffix matTooltip="Anzahl der erwarteten Nutzungen pro Jahr">info</mat-icon>
              <mat-error *ngIf="pricingForm.get('expectedCasesPerYear')?.invalid && pricingForm.get('expectedCasesPerYear')?.touched">
                Bitte geben Sie die erwartete Fallzahl ein
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Amortisationszeitraum *</mat-label>
              <input matInput type="number" formControlName="amortizationPeriod" required>
              <span matSuffix>Jahre</span>
              <mat-icon matSuffix matTooltip="Zeitraum f√ºr die Amortisation der Entwicklungskosten">info</mat-icon>
              <mat-error *ngIf="pricingForm.get('amortizationPeriod')?.invalid && pricingForm.get('amortizationPeriod')?.touched">
                Bitte geben Sie den Amortisierungszeitraum ein
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <!-- Kostenberechnung Live-Feedback -->
        <div class="cost-calculation" *ngIf="pricingForm.get('developmentCosts')?.value > 0 || pricingForm.get('costPerUsage')?.value > 0">
          <mat-card class="calculation-card">
            <mat-card-header>
              <mat-card-title>Kostenberechnung</mat-card-title>
              <mat-card-subtitle>Selbstkosten pro Fall</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <div class="calculation-result">
                <span class="result-label">Berechnete Selbstkosten pro Fall:</span>
                <span class="result-value">{{ calculateCostPerCase() | number:'1.2-2' }} ‚Ç¨</span>
              </div>
              <div class="calculation-breakdown">
                <small>
                  ‚Ä¢ Amortisierte Entwicklungskosten: {{ (pricingForm.get('developmentCosts')?.value || 0) / ((pricingForm.get('expectedCasesPerYear')?.value || 100) * (pricingForm.get('amortizationPeriod')?.value || 5)) | number:'1.2-2' }} ‚Ç¨<br>
                  ‚Ä¢ Kosten pro Nutzung: {{ pricingForm.get('costPerUsage')?.value || 0 | number:'1.2-2' }} ‚Ç¨<br>
                  ‚Ä¢ Wartungskosten pro Fall: {{ (pricingForm.get('maintenanceCosts')?.value || 0) / (pricingForm.get('expectedCasesPerYear')?.value || 100) | number:'1.2-2' }} ‚Ç¨
                </small>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Phase 2: Komplexit√§t -->
  <div class="phase" *ngIf="currentPhase === 1">
    <mat-card class="strategy-card">
      <mat-card-header>
        <mat-card-title>Komplexit√§t</mat-card-title>
        <mat-card-subtitle>Bewertung der technischen und medizinischen Komplexit√§t</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content [formGroup]="pricingForm">
        <div class="form-group">
          <label class="form-label">Messbarkeit des Nutzens *</label>
          <mat-radio-group formControlName="measurability" class="radio-group" required>
            <div class="radio-option" [class.selected]="pricingForm.get('measurability')?.value === 'high'" (click)="pricingForm.get('measurability')?.setValue('high')">
              <mat-radio-button value="high">
                <div class="radio-text">
                  <strong>Hoch</strong>
                  <small>Nutzen ist klar messbar und quantifizierbar</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('measurability')?.value === 'medium'" (click)="pricingForm.get('measurability')?.setValue('medium')">
              <mat-radio-button value="medium">
                <div class="radio-text">
                  <strong>Mittel</strong>
                  <small>Nutzen ist teilweise messbar</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('measurability')?.value === 'low'" (click)="pricingForm.get('measurability')?.setValue('low')">
              <mat-radio-button value="low">
                <div class="radio-text">
                  <strong>Niedrig</strong>
                  <small>Nutzen ist schwer messbar</small>
                </div>
              </mat-radio-button>
            </div>
          </mat-radio-group>
          <mat-error *ngIf="pricingForm.get('measurability')?.invalid && pricingForm.get('measurability')?.touched">
            Bitte w√§hlen Sie die Messbarkeit des Nutzens
          </mat-error>
        </div>

        <div class="form-group">
          <label class="form-label">AI-Inferenzkosten *</label>
          <mat-radio-group formControlName="inferenceCosts" class="radio-group" required>
            <div class="radio-option" [class.selected]="pricingForm.get('inferenceCosts')?.value === 'low'" (click)="pricingForm.get('inferenceCosts')?.setValue('low')">
              <mat-radio-button value="low">
                <div class="radio-text">
                  <strong>Niedrig</strong>
                  <small>Geringe laufende Kosten f√ºr AI-Verarbeitung</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('inferenceCosts')?.value === 'medium'" (click)="pricingForm.get('inferenceCosts')?.setValue('medium')">
              <mat-radio-button value="medium">
                <div class="radio-text">
                  <strong>Mittel</strong>
                  <small>Moderate laufende Kosten</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('inferenceCosts')?.value === 'high'" (click)="pricingForm.get('inferenceCosts')?.setValue('high')">
              <mat-radio-button value="high">
                <div class="radio-text">
                  <strong>Hoch</strong>
                  <small>Hohe laufende Kosten f√ºr AI-Verarbeitung</small>
                </div>
              </mat-radio-button>
            </div>
          </mat-radio-group>
          <mat-error *ngIf="pricingForm.get('inferenceCosts')?.invalid && pricingForm.get('inferenceCosts')?.touched">
            Bitte w√§hlen Sie die AI-Inferenzkosten
          </mat-error>
        </div>

        <!-- Komplexit√§tsbewertung - Eingabemethode -->
        <mat-divider style="margin: 20px 0;"></mat-divider>
        <h3>{{ translate('pricing.complexity.evaluation') }}</h3>
        
        <!-- Eingabemethode w√§hlen -->
        <div class="form-group">
          <label class="form-label">{{ translate('pricing.complexity.evaluationMethod') }} *</label>
          <mat-radio-group formControlName="complexityInputMethod" class="input-method-group">
            <mat-radio-button value="detailed" class="input-method-option">
              <div class="option-content">
                <strong>{{ translate('pricing.complexity.detailed') }}</strong>
                <small>{{ translate('pricing.complexity.detailedDesc') }}</small>
              </div>
            </mat-radio-button>
            <mat-radio-button value="direct" class="input-method-option">
              <div class="option-content">
                <strong>{{ translate('pricing.complexity.direct') }}</strong>
                <small>{{ translate('pricing.complexity.directDesc') }}</small>
              </div>
            </mat-radio-button>
          </mat-radio-group>
        </div>

        <!-- Direkte Score-Eingabe -->
        <div *ngIf="pricingForm.get('complexityInputMethod')?.value === 'direct'" class="direct-score-section">
          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>{{ translate('pricing.complexity.aiScore') }} *</mat-label>
              <input matInput type="number" formControlName="directComplexityScore" min="20" max="100" required>
              <mat-icon matSuffix [matTooltip]="translate('pricing.complexity.aiScoreTooltip')">info</mat-icon>
              <mat-error *ngIf="pricingForm.get('directComplexityScore')?.invalid && pricingForm.get('directComplexityScore')?.touched">
                {{ translate('pricing.complexity.aiScoreError') }}
              </mat-error>
            </mat-form-field>
          </div>
          
          <!-- Score-Anzeige -->
          <div class="score-preview">
            <mat-card class="feedback-card">
              <mat-card-content>
                <div class="score-display">
                  <div class="score-value">{{ calculateComplexityScore() }}/100</div>
                  <div class="score-level" [class]="getComplexityLevel()">{{ getComplexityLevel() | titlecase }}</div>
                </div>
              </mat-card-content>
            </mat-card>
          </div>
        </div>

        <!-- Detaillierte Bewertung -->
        <div *ngIf="pricingForm.get('complexityInputMethod')?.value === 'detailed'">
          <p class="complexity-description">{{ translate('pricing.complexity.evaluationDescription') }}</p>

        <!-- 1. Datenkomplexit√§t und -vielfalt -->
        <h4>1. {{ translate('dimensions.dataComplexity') }}</h4>
        <div class="complexity-grid">
          <div class="form-group">
            <label class="form-label">{{ translate('criteria.sourceVariety') }} ({{ translate('criteria.sourceVarietyDesc') }}) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('dataSourceDiversity')?.value === '1'">
                <input type="radio" formControlName="dataSourceDiversity" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 {{ getScoreLabel('dataSourceDiversity', 1) }}</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dataSourceDiversity')?.value === '2'">
                <input type="radio" formControlName="dataSourceDiversity" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 {{ getScoreLabel('dataSourceDiversity', 2) }}</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dataSourceDiversity')?.value === '3'">
                <input type="radio" formControlName="dataSourceDiversity" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 {{ getScoreLabel('dataSourceDiversity', 3) }}</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dataSourceDiversity')?.value === '4'">
                <input type="radio" formControlName="dataSourceDiversity" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 {{ getScoreLabel('dataSourceDiversity', 4) }}</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dataSourceDiversity')?.value === '5'">
                <input type="radio" formControlName="dataSourceDiversity" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 {{ getScoreLabel('dataSourceDiversity', 5) }}</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">{{ translate('criteria.dataIntegrity') }} ({{ translate('criteria.dataIntegrityDesc') }}) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('dataIntegrity')?.value === '1'">
                <input type="radio" formControlName="dataIntegrity" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 {{ getScoreLabel('dataIntegrity', 1) }}</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dataIntegrity')?.value === '2'">
                <input type="radio" formControlName="dataIntegrity" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 {{ getScoreLabel('dataIntegrity', 2) }}</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dataIntegrity')?.value === '3'">
                <input type="radio" formControlName="dataIntegrity" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 {{ getScoreLabel('dataIntegrity', 3) }}</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dataIntegrity')?.value === '4'">
                <input type="radio" formControlName="dataIntegrity" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 {{ getScoreLabel('dataIntegrity', 4) }}</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dataIntegrity')?.value === '5'">
                <input type="radio" formControlName="dataIntegrity" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 {{ getScoreLabel('dataIntegrity', 5) }}</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">{{ translate('criteria.dataComplexityLevel') }} ({{ translate('criteria.dataComplexityLevelDesc') }}) *</label>
            <div class="score-options flex">
              <label *ngFor="let score of [1,2,3,4,5]" class="score-label" [class.selected]="pricingForm.get('dataComplexity')?.value === score.toString()">
                <input type="radio" formControlName="dataComplexity" [value]="score" class="ng-untouched ng-pristine ng-valid">
                <span>{{ score }} {{ getScoreLabel('dataComplexityLevel', score) }}</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">{{ translate('criteria.dataLinking') }} ({{ translate('criteria.dataLinkingDesc') }}) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('dataLinking')?.value === '1'">
                <input type="radio" formControlName="dataLinking" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 {{ getScoreLabel('dataLinking', 1) }}</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dataLinking')?.value === '2'">
                <input type="radio" formControlName="dataLinking" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 {{ getScoreLabel('dataLinking', 2) }}</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dataLinking')?.value === '3'">
                <input type="radio" formControlName="dataLinking" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 {{ getScoreLabel('dataLinking', 3) }}</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dataLinking')?.value === '4'">
                <input type="radio" formControlName="dataLinking" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 {{ getScoreLabel('dataLinking', 4) }}</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dataLinking')?.value === '5'">
                <input type="radio" formControlName="dataLinking" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 {{ getScoreLabel('dataLinking', 5) }}</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">{{ translate('criteria.dataVolume') }} ({{ translate('criteria.dataVolumeDesc') }}) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('dataVolume')?.value === '1'">
                <input type="radio" formControlName="dataVolume" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 {{ getScoreLabel('dataVolume', 1) }}</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dataVolume')?.value === '2'">
                <input type="radio" formControlName="dataVolume" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 {{ getScoreLabel('dataVolume', 2) }}</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dataVolume')?.value === '3'">
                <input type="radio" formControlName="dataVolume" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 {{ getScoreLabel('dataVolume', 3) }}</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dataVolume')?.value === '4'">
                <input type="radio" formControlName="dataVolume" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 {{ getScoreLabel('dataVolume', 4) }}</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dataVolume')?.value === '5'">
                <input type="radio" formControlName="dataVolume" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 {{ getScoreLabel('dataVolume', 5) }}</span>
              </label>
            </div>
          </div>
        </div>

        <!-- 2. Komplexit√§t der Erkrankung -->
        <h4>2. Komplexit√§t der Erkrankung</h4>
        <div class="complexity-grid">
          <div class="form-group">
            <label class="form-label">Seltenheit der Erkrankung (Pr√§valenz in der Bev√∂lkerung.) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('diseaseRarity')?.value === '1'">
                <input type="radio" formControlName="diseaseRarity" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 H√§ufig (z.B. An√§mie).</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('diseaseRarity')?.value === '2'">
                <input type="radio" formControlName="diseaseRarity" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 Unterdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('diseaseRarity')?.value === '3'">
                <input type="radio" formControlName="diseaseRarity" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 Durchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('diseaseRarity')?.value === '4'">
                <input type="radio" formControlName="diseaseRarity" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 √úberdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('diseaseRarity')?.value === '5'">
                <input type="radio" formControlName="diseaseRarity" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 Sehr selten (z.B. Morbus Gaucher).</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Diagnostische Mehrdeutigkeit (Schwierigkeit der Abgrenzung von anderen Krankheitsbildern.) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('diagnosticAmbiguity')?.value === '1'">
                <input type="radio" formControlName="diagnosticAmbiguity" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 Einfach abzugrenzen (z.B. Grippe).</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('diagnosticAmbiguity')?.value === '2'">
                <input type="radio" formControlName="diagnosticAmbiguity" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 Unterdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('diagnosticAmbiguity')?.value === '3'">
                <input type="radio" formControlName="diagnosticAmbiguity" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 Durchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('diagnosticAmbiguity')?.value === '4'">
                <input type="radio" formControlName="diagnosticAmbiguity" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 √úberdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('diagnosticAmbiguity')?.value === '5'">
                <input type="radio" formControlName="diagnosticAmbiguity" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 Hochgradig mehrdeutig (z.B. systemischer Lupus erythematodes).</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Prognostische Unsicherheit (Vorhersehbarkeit des Krankheitsverlaufs.) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('prognosticUncertainty')?.value === '1'">
                <input type="radio" formControlName="prognosticUncertainty" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 Gut vorhersagbar (z.B. unkomplizierte bakterielle Infektion).</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('prognosticUncertainty')?.value === '2'">
                <input type="radio" formControlName="prognosticUncertainty" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 Unterdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('prognosticUncertainty')?.value === '3'">
                <input type="radio" formControlName="prognosticUncertainty" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 Durchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('prognosticUncertainty')?.value === '4'">
                <input type="radio" formControlName="prognosticUncertainty" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 √úberdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('prognosticUncertainty')?.value === '5'">
                <input type="radio" formControlName="prognosticUncertainty" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 Unvorhersehbar und individuell unterschiedlich (z.B. aggressive Krebsarten).</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Multimorbidit√§t (Einfluss anderer Erkrankungen auf die Zielerkrankung.) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('multimorbidity')?.value === '1'">
                <input type="radio" formControlName="multimorbidity" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 Kaum beeinflusst durch Komorbidit√§ten.</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('multimorbidity')?.value === '2'">
                <input type="radio" formControlName="multimorbidity" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 Unterdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('multimorbidity')?.value === '3'">
                <input type="radio" formControlName="multimorbidity" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 Durchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('multimorbidity')?.value === '4'">
                <input type="radio" formControlName="multimorbidity" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 √úberdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('multimorbidity')?.value === '5'">
                <input type="radio" formControlName="multimorbidity" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 Stark beeinflusst durch zahlreiche Komorbidit√§ten.</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Schweregrad der Erkrankung (Lethalit√§t und Bedeutung einer fr√ºhen Entdeckung.) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('diseaseSeverity')?.value === '1'">
                <input type="radio" formControlName="diseaseSeverity" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 Geringe Lethalit√§t und wenig Einfluss auf Patienten.</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('diseaseSeverity')?.value === '2'">
                <input type="radio" formControlName="diseaseSeverity" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 Unterdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('diseaseSeverity')?.value === '3'">
                <input type="radio" formControlName="diseaseSeverity" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 Durchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('diseaseSeverity')?.value === '4'">
                <input type="radio" formControlName="diseaseSeverity" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 √úberdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('diseaseSeverity')?.value === '5'">
                <input type="radio" formControlName="diseaseSeverity" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 Hohe Letalit√§t wie z.B. Krebs.</span>
              </label>
            </div>
          </div>
        </div>

        <!-- 3. Schwierigkeitsgrad der Fragestellung -->
        <h4>3. Schwierigkeitsgrad der Fragestellung</h4>
        <div class="complexity-grid">
          <div class="form-group">
            <label class="form-label">Differenzialdiagnostische Tiefe (Anzahl m√∂glicher Diagnosen, die in der Anfrage ber√ºcksichtigt werden m√ºssen.) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('differentialDiagnosticDepth')?.value === '1'">
                <input type="radio" formControlName="differentialDiagnosticDepth" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 Wenige Differenzialdiagnosen (< 3).</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('differentialDiagnosticDepth')?.value === '2'">
                <input type="radio" formControlName="differentialDiagnosticDepth" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 Unterdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('differentialDiagnosticDepth')?.value === '3'">
                <input type="radio" formControlName="differentialDiagnosticDepth" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 Durchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('differentialDiagnosticDepth')?.value === '4'">
                <input type="radio" formControlName="differentialDiagnosticDepth" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 √úberdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('differentialDiagnosticDepth')?.value === '5'">
                <input type="radio" formControlName="differentialDiagnosticDepth" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 Viele Differenzialdiagnosen (> 10).</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Prognostische Pr√§zision (Grad der Genauigkeit und Langfristigkeit der Vorhersage.) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('prognosticPrecision')?.value === '1'">
                <input type="radio" formControlName="prognosticPrecision" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 Nur kurzfristige Trends (z.B. einfache Risikoabsch√§tzung).</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('prognosticPrecision')?.value === '2'">
                <input type="radio" formControlName="prognosticPrecision" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 Unterdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('prognosticPrecision')?.value === '3'">
                <input type="radio" formControlName="prognosticPrecision" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 Durchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('prognosticPrecision')?.value === '4'">
                <input type="radio" formControlName="prognosticPrecision" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 √úberdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('prognosticPrecision')?.value === '5'">
                <input type="radio" formControlName="prognosticPrecision" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 Hochpr√§zise, langfristige Vorhersagen (z.B. Krankheitsprogression).</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Anforderung an die Echtzeit (Erwartung an die Geschwindigkeit des Systems.) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('realTimeRequirement')?.value === '1'">
                <input type="radio" formControlName="realTimeRequirement" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 N√§chtliche Batch Prozessierung ausreichend.</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('realTimeRequirement')?.value === '2'">
                <input type="radio" formControlName="realTimeRequirement" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 Unterdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('realTimeRequirement')?.value === '3'">
                <input type="radio" formControlName="realTimeRequirement" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 Durchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('realTimeRequirement')?.value === '4'">
                <input type="radio" formControlName="realTimeRequirement" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 √úberdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('realTimeRequirement')?.value === '5'">
                <input type="radio" formControlName="realTimeRequirement" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 Sofortige Antwort erwartet.</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Interdisziplin√§re Relevanz (Anzahl der Fachbereiche, die in die Analyse einflie√üen.) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('interdisciplinaryRelevance')?.value === '1'">
                <input type="radio" formControlName="interdisciplinaryRelevance" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 Nur ein Fachbereich.</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('interdisciplinaryRelevance')?.value === '2'">
                <input type="radio" formControlName="interdisciplinaryRelevance" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 Unterdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('interdisciplinaryRelevance')?.value === '3'">
                <input type="radio" formControlName="interdisciplinaryRelevance" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 Durchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('interdisciplinaryRelevance')?.value === '4'">
                <input type="radio" formControlName="interdisciplinaryRelevance" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 √úberdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('interdisciplinaryRelevance')?.value === '5'">
                <input type="radio" formControlName="interdisciplinaryRelevance" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 Mehrere Fachbereiche (> 3).</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Dynamische Anpassungsf√§higkeit (F√§higkeit des Systems, auf √Ñnderungen klinischer Parameter zu reagieren.) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('dynamicAdaptability')?.value === '1'">
                <input type="radio" formControlName="dynamicAdaptability" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 Keine Anpassung an dynamische Parameter.</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dynamicAdaptability')?.value === '2'">
                <input type="radio" formControlName="dynamicAdaptability" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 Unterdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dynamicAdaptability')?.value === '3'">
                <input type="radio" formControlName="dynamicAdaptability" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 Durchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dynamicAdaptability')?.value === '4'">
                <input type="radio" formControlName="dynamicAdaptability" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 √úberdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('dynamicAdaptability')?.value === '5'">
                <input type="radio" formControlName="dynamicAdaptability" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 Echtzeit-Anpassung an klinische √Ñnderungen.</span>
              </label>
            </div>
          </div>
        </div>

        <!-- 4. Ausma√ü der KI-Unterst√ºtzung -->
        <h4>4. Ausma√ü der KI-Unterst√ºtzung</h4>
        <div class="complexity-grid">
          <div class="form-group">
            <label class="form-label">Automatisierungsgrad (Grad der Autonomie der KI.) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('automationLevel')?.value === '1'">
                <input type="radio" formControlName="automationLevel" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 Nur unterst√ºtzend, keine eigenst√§ndigen Analysen.</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('automationLevel')?.value === '2'">
                <input type="radio" formControlName="automationLevel" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 Unterdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('automationLevel')?.value === '3'">
                <input type="radio" formControlName="automationLevel" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 Durchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('automationLevel')?.value === '4'">
                <input type="radio" formControlName="automationLevel" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 √úberdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('automationLevel')?.value === '5'">
                <input type="radio" formControlName="automationLevel" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 Vollautomatisierte Analysen und Entscheidungen.</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Analyseebene (Tiefe der durchgef√ºhrten Analyse.) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('analysisDepth')?.value === '1'">
                <input type="radio" formControlName="analysisDepth" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 Einfacher Vorschlag.</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('analysisDepth')?.value === '2'">
                <input type="radio" formControlName="analysisDepth" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 Unterdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('analysisDepth')?.value === '3'">
                <input type="radio" formControlName="analysisDepth" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 Durchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('analysisDepth')?.value === '4'">
                <input type="radio" formControlName="analysisDepth" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 √úberdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('analysisDepth')?.value === '5'">
                <input type="radio" formControlName="analysisDepth" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 Hochdimensionale, integrative Analysen.</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Empfehlungskomplexit√§t (Umfang der Vorschl√§ge oder Handlungspl√§ne.) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('recommendationComplexity')?.value === '1'">
                <input type="radio" formControlName="recommendationComplexity" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 Einfache, generische Vorschl√§ge.</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('recommendationComplexity')?.value === '2'">
                <input type="radio" formControlName="recommendationComplexity" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 Unterdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('recommendationComplexity')?.value === '3'">
                <input type="radio" formControlName="recommendationComplexity" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 Durchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('recommendationComplexity')?.value === '4'">
                <input type="radio" formControlName="recommendationComplexity" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 √úberdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('recommendationComplexity')?.value === '5'">
                <input type="radio" formControlName="recommendationComplexity" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 Detaillierte, umsetzungsf√§hige Handlungspl√§ne.</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Integration von Leitlinien (Umfang der Einbindung medizinischer Standards.) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('guidelineIntegration')?.value === '1'">
                <input type="radio" formControlName="guidelineIntegration" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 Keine Ber√ºcksichtigung von Leitlinien.</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('guidelineIntegration')?.value === '2'">
                <input type="radio" formControlName="guidelineIntegration" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 Unterdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('guidelineIntegration')?.value === '3'">
                <input type="radio" formControlName="guidelineIntegration" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 Durchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('guidelineIntegration')?.value === '4'">
                <input type="radio" formControlName="guidelineIntegration" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 √úberdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('guidelineIntegration')?.value === '5'">
                <input type="radio" formControlName="guidelineIntegration" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 Vollst√§ndige Integration aktueller Leitlinien.</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Patientenspezifische Individualisierung (Ber√ºcksichtigung individueller Patientenmerkmale.) *</label>
            <div class="score-options flex">
              <label class="score-label" [class.selected]="pricingForm.get('patientSpecificIndividualization')?.value === '1'">
                <input type="radio" formControlName="patientSpecificIndividualization" value="1" class="ng-untouched ng-pristine ng-valid">
                <span>1 Keine Individualisierung.</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('patientSpecificIndividualization')?.value === '2'">
                <input type="radio" formControlName="patientSpecificIndividualization" value="2" class="ng-untouched ng-pristine ng-valid">
                <span>2 Unterdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('patientSpecificIndividualization')?.value === '3'">
                <input type="radio" formControlName="patientSpecificIndividualization" value="3" class="ng-untouched ng-pristine ng-valid">
                <span>3 Durchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('patientSpecificIndividualization')?.value === '4'">
                <input type="radio" formControlName="patientSpecificIndividualization" value="4" class="ng-untouched ng-pristine ng-valid">
                <span>4 √úberdurchschnittlich</span>
              </label>
              <label class="score-label" [class.selected]="pricingForm.get('patientSpecificIndividualization')?.value === '5'">
                <input type="radio" formControlName="patientSpecificIndividualization" value="5" class="ng-untouched ng-pristine ng-valid">
                <span>5 H√∂chstgradig patientenspezifische Analysen.</span>
              </label>
            </div>
          </div>
        </div>

          <!-- Komplexit√§ts-Score Live-Feedback -->
          <div class="complexity-feedback">
            <mat-card class="feedback-card">
              <mat-card-header>
                <mat-card-title>{{ translate('pricing.complexity.score') }}</mat-card-title>
                <mat-card-subtitle>{{ translate('pricing.complexity.scoreSubtitle') }}</mat-card-subtitle>
              </mat-card-header>
              <mat-card-content>
                <div class="score-display">
                  <div class="score-value">{{ calculateComplexityScore() }}/100</div>
                  <div class="score-level" [class]="getComplexityLevel()">{{ getComplexityLevel() | titlecase }}</div>
                </div>
                <div class="score-breakdown">
                  <small>
                    <strong>1. {{ translate('dimensions.dataComplexity') }}:</strong> {{ (Number(pricingForm.get('dataSourceDiversity')?.value) || 3) + (Number(pricingForm.get('dataIntegrity')?.value) || 3) + (Number(pricingForm.get('dataComplexity')?.value) || 3) + (Number(pricingForm.get('dataLinking')?.value) || 3) + (Number(pricingForm.get('dataVolume')?.value) || 3) }}/25<br>
                    <strong>2. {{ translate('dimensions.diseaseComplexity') }}:</strong> {{ (Number(pricingForm.get('diseaseRarity')?.value) || 3) + (Number(pricingForm.get('diagnosticAmbiguity')?.value) || 3) + (Number(pricingForm.get('prognosticUncertainty')?.value) || 3) + (Number(pricingForm.get('multimorbidity')?.value) || 3) + (Number(pricingForm.get('diseaseSeverity')?.value) || 3) }}/25<br>
                    <strong>3. {{ translate('dimensions.questionDifficulty') }}:</strong> {{ (Number(pricingForm.get('differentialDiagnosticDepth')?.value) || 3) + (Number(pricingForm.get('prognosticPrecision')?.value) || 3) + (Number(pricingForm.get('realTimeRequirement')?.value) || 3) + (Number(pricingForm.get('interdisciplinaryRelevance')?.value) || 3) + (Number(pricingForm.get('dynamicAdaptability')?.value) || 3) }}/25<br>
                    <strong>4. {{ translate('dimensions.aiSupportExtent') }}:</strong> {{ (Number(pricingForm.get('automationLevel')?.value) || 3) + (Number(pricingForm.get('analysisDepth')?.value) || 3) + (Number(pricingForm.get('recommendationComplexity')?.value) || 3) + (Number(pricingForm.get('guidelineIntegration')?.value) || 3) + (Number(pricingForm.get('patientSpecificIndividualization')?.value) || 3) }}/25
                  </small>
                </div>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Phase 3: Markt & Wettbewerb -->
  <div class="phase" *ngIf="currentPhase === 2">
    <mat-card class="strategy-card">
      <mat-card-header>
        <mat-card-title>{{ translate('pricing.market.title') }}</mat-card-title>
        <mat-card-subtitle>{{ translate('pricing.market.subtitle') }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content [formGroup]="pricingForm">
        <div class="form-group">
          <label class="form-label">{{ translate('pricing.sector') }} *</label>
          <mat-radio-group formControlName="sector" class="radio-group" required>
            <div class="radio-option" [class.selected]="pricingForm.get('sector')?.value === 'public'" (click)="pricingForm.get('sector')?.setValue('public')">
              <mat-radio-button value="public">
                <div class="radio-text">
                  <strong>{{ translate('pricing.sector.public') }}</strong>
                  <small>{{ translate('pricing.sector.publicDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('sector')?.value === 'private'" (click)="pricingForm.get('sector')?.setValue('private')">
              <mat-radio-button value="private">
                <div class="radio-text">
                  <strong>{{ translate('pricing.sector.private') }}</strong>
                  <small>{{ translate('pricing.sector.privateDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('sector')?.value === 'hybrid'" (click)="pricingForm.get('sector')?.setValue('hybrid')">
              <mat-radio-button value="hybrid">
                <div class="radio-text">
                  <strong>{{ translate('pricing.sector.hybrid') }}</strong>
                  <small>{{ translate('pricing.sector.hybridDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
          </mat-radio-group>
          <mat-error *ngIf="pricingForm.get('sector')?.invalid && pricingForm.get('sector')?.touched">
            Bitte w√§hlen Sie einen Zielsektor
          </mat-error>
        </div>

        <div class="form-group">
          <label class="form-label">{{ translate('pricing.reimbursement') }} *</label>
          <mat-radio-group formControlName="reimbursement" class="radio-group" required>
            <div class="radio-option" [class.selected]="pricingForm.get('reimbursement')?.value === 'yes'" (click)="pricingForm.get('reimbursement')?.setValue('yes')">
              <mat-radio-button value="yes">
                <div class="radio-text">
                  <strong>{{ translate('pricing.reimbursement.yes') }}</strong>
                  <small>{{ translate('pricing.reimbursement.yesDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('reimbursement')?.value === 'no'" (click)="pricingForm.get('reimbursement')?.setValue('no')">
              <mat-radio-button value="no">
                <div class="radio-text">
                  <strong>{{ translate('pricing.reimbursement.no') }}</strong>
                  <small>{{ translate('pricing.reimbursement.noDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
          </mat-radio-group>
          <mat-error *ngIf="pricingForm.get('reimbursement')?.invalid && pricingForm.get('reimbursement')?.touched">
            Bitte w√§hlen Sie die Erstattungsm√∂glichkeit
          </mat-error>
        </div>

        <div class="form-group">
          <label class="form-label">{{ translate('pricing.competition') }} *</label>
          <mat-radio-group formControlName="competition" class="radio-group" required>
            <div class="radio-option" [class.selected]="pricingForm.get('competition')?.value === 'low'" (click)="pricingForm.get('competition')?.setValue('low')">
              <mat-radio-button value="low">
                <div class="radio-text">
                  <strong>{{ translate('pricing.competition.low') }}</strong>
                  <small>{{ translate('pricing.competition.lowDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('competition')?.value === 'medium'" (click)="pricingForm.get('competition')?.setValue('medium')">
              <mat-radio-button value="medium">
                <div class="radio-text">
                  <strong>{{ translate('pricing.competition.medium') }}</strong>
                  <small>{{ translate('pricing.competition.mediumDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('competition')?.value === 'high'" (click)="pricingForm.get('competition')?.setValue('high')">
              <mat-radio-button value="high">
                <div class="radio-text">
                  <strong>{{ translate('pricing.competition.high') }}</strong>
                  <small>{{ translate('pricing.competition.highDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
          </mat-radio-group>
          <mat-error *ngIf="pricingForm.get('competition')?.invalid && pricingForm.get('competition')?.touched">
            Bitte w√§hlen Sie die Wettbewerbsintensit√§t
          </mat-error>
        </div>

        <!-- Wettbewerberdaten -->
        <mat-divider style="margin: 20px 0;"></mat-divider>
        <h3>{{ translate('competitor.title') }}</h3>
        <p class="competitors-description">{{ translate('competitor.subtitle') }}</p>

        <div class="competitors-section">
          <div class="competitors-header">
            <button mat-raised-button color="primary" (click)="addCompetitor()">
              <mat-icon>add</mat-icon>
              {{ translate('competitor.addCompetitor') }}
            </button>
          </div>

          <div class="competitors-list" *ngIf="competitorsArray.length > 0">
            <div class="competitor-item" *ngFor="let competitor of competitorsArray.controls; let i = index" [formGroup]="$any(competitor)">
              <mat-card class="competitor-card">
                <mat-card-content>
                  <div class="competitor-fields">
                    <mat-form-field appearance="outline">
                      <mat-label>{{ translate('competitor.name') }}</mat-label>
                      <input matInput formControlName="name" required>
                    </mat-form-field>
                    
                    <mat-form-field appearance="outline">
                      <mat-label>{{ translate('competitor.pricePerCase') }}</mat-label>
                      <input matInput type="number" formControlName="price" required>
                      <span matSuffix>‚Ç¨</span>
                    </mat-form-field>
                    
                    <mat-form-field appearance="outline">
                      <mat-label>{{ translate('competitor.specialFeatures') }}</mat-label>
                      <input matInput formControlName="features" placeholder="z.B. besondere Features, Zielgruppe">
                    </mat-form-field>
                    
                    <button mat-icon-button color="warn" (click)="removeCompetitor(i)">
                      <mat-icon>delete</mat-icon>
                    </button>
                  </div>
                </mat-card-content>
              </mat-card>
            </div>
          </div>

          <!-- Marktstatistiken -->
          <div class="market-stats" *ngIf="competitorsArray.length > 0">
            <mat-card class="stats-card">
              <mat-card-header>
                <mat-card-title>{{ translate('pricing.market.marketStats') }}</mat-card-title>
                <mat-card-subtitle>{{ translate('pricing.market.marketStatsSubtitle') }}</mat-card-subtitle>
              </mat-card-header>
              <mat-card-content>
                <div class="stats-grid">
                  <div class="stat-item">
                    <span class="stat-label">{{ translate('pricing.market.minPrice') }}:</span>
                    <span class="stat-value">{{ calculateMarketStats().min | number:'1.2-2' }} ‚Ç¨</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-label">{{ translate('pricing.market.maxPrice') }}:</span>
                    <span class="stat-value">{{ calculateMarketStats().max | number:'1.2-2' }} ‚Ç¨</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-label">{{ translate('pricing.market.avgPrice') }}:</span>
                    <span class="stat-value">{{ calculateMarketStats().avg | number:'1.2-2' }} ‚Ç¨</span>
                  </div>
                </div>
              </mat-card-content>
            </mat-card>
          </div>
        </div>

        <!-- Alternative Referenz -->
        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ translate('pricing.market.alternativeMethod') }}</mat-label>
            <input matInput type="number" formControlName="alternativeMethodCosts">
            <span matSuffix>‚Ç¨</span>
            <mat-icon matSuffix [matTooltip]="translate('pricing.market.alternativeMethodTooltip')">info</mat-icon>
          </mat-form-field>
        </div>

        <!-- Marktvergleich Live-Feedback -->
        <div class="market-feedback" *ngIf="calculateCostPerCase() > 0 && (competitorsArray.length > 0 || pricingForm.get('alternativeMethodCosts')?.value > 0)">
          <mat-card class="feedback-card">
            <mat-card-header>
              <mat-card-title>{{ translate('pricing.market.marketComparison') }}</mat-card-title>
              <mat-card-subtitle>{{ translate('pricing.market.marketComparisonSubtitle') }}</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <div class="price-comparison">
                <div class="your-price">
                  <span class="price-label">{{ translate('pricing.market.yourCosts') }}:</span>
                  <span class="price-value">{{ calculateCostPerCase() | number:'1.2-2' }} ‚Ç¨</span>
                </div>
                
                <div class="market-comparison" *ngIf="competitorsArray.length > 0">
                  <div class="comparison-item" [class.warning]="calculateCostPerCase() > calculateMarketStats().max">
                    <span class="comparison-label">{{ translate('pricing.market.marketPrices') }}:</span>
                    <span class="comparison-value">{{ calculateMarketStats().min | number:'1.2-2' }} - {{ calculateMarketStats().max | number:'1.2-2' }} ‚Ç¨</span>
                  </div>
                  <div class="comparison-item" [class.warning]="calculateCostPerCase() > calculateMarketStats().avg">
                    <span class="comparison-label">{{ translate('pricing.market.marketAverage') }}:</span>
                    <span class="comparison-value">{{ calculateMarketStats().avg | number:'1.2-2' }} ‚Ç¨</span>
                  </div>
                </div>

                <div class="alternative-comparison" *ngIf="pricingForm.get('alternativeMethodCosts')?.value > 0">
                  <div class="comparison-item">
                    <span class="comparison-label">{{ translate('pricing.market.conventionalMethod') }}:</span>
                    <span class="comparison-value">{{ pricingForm.get('alternativeMethodCosts')?.value | number:'1.2-2' }} ‚Ç¨</span>
                  </div>
                </div>

                <!-- Dynamische Hinweise -->
                <div class="market-hints" *ngIf="competitorsArray.length > 0">
                  <div class="hint warning" *ngIf="calculateCostPerCase() > calculateMarketStats().max">
                    <mat-icon>warning</mat-icon>
                    <span>{{ translate('pricing.market.warningAboveMax') }} {{ ((calculateCostPerCase() / calculateMarketStats().max - 1) * 100) | number:'1.0-1' }}{{ translate('pricing.market.warningAboveMaxEnd') }}</span>
                  </div>
                  <div class="hint info" *ngIf="calculateCostPerCase() < calculateMarketStats().min">
                    <mat-icon>info</mat-icon>
                    <span>{{ translate('pricing.market.infoBelowMin') }}</span>
                  </div>
                  <div class="hint success" *ngIf="calculateCostPerCase() >= calculateMarketStats().min && calculateCostPerCase() <= calculateMarketStats().max">
                    <mat-icon>check_circle</mat-icon>
                    <span>{{ translate('pricing.market.successInRange') }} {{ calculateCostPerCase() > calculateMarketStats().avg ? translate('pricing.market.successUpper') : translate('pricing.market.successLower') }} {{ translate('pricing.market.successEnd') }}</span>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Phase 4: Implementierung & Vertrieb -->
  <div class="phase" *ngIf="currentPhase === 3">
    <mat-card class="strategy-card">
      <mat-card-header>
        <mat-card-title>{{ translate('pricing.implementation.title') }}</mat-card-title>
        <mat-card-subtitle>{{ translate('pricing.implementation.subtitle') }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content [formGroup]="pricingForm">
        <div class="form-group">
          <label class="form-label">{{ translate('pricing.implementation.salesComplexity') }} *</label>
          <mat-radio-group formControlName="salesEffort" class="radio-group" required>
            <div class="radio-option" [class.selected]="pricingForm.get('salesEffort')?.value === 'low'" (click)="pricingForm.get('salesEffort')?.setValue('low')">
              <mat-radio-button value="low">
                <div class="radio-text">
                  <strong>{{ translate('pricing.implementation.salesComplexity.low') }}</strong>
                  <small>{{ translate('pricing.implementation.salesComplexity.lowDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('salesEffort')?.value === 'medium'" (click)="pricingForm.get('salesEffort')?.setValue('medium')">
              <mat-radio-button value="medium">
                <div class="radio-text">
                  <strong>{{ translate('pricing.implementation.salesComplexity.medium') }}</strong>
                  <small>{{ translate('pricing.implementation.salesComplexity.mediumDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('salesEffort')?.value === 'high'" (click)="pricingForm.get('salesEffort')?.setValue('high')">
              <mat-radio-button value="high">
                <div class="radio-text">
                  <strong>{{ translate('pricing.implementation.salesComplexity.high') }}</strong>
                  <small>{{ translate('pricing.implementation.salesComplexity.highDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
          </mat-radio-group>
          <mat-error *ngIf="pricingForm.get('salesEffort')?.invalid && pricingForm.get('salesEffort')?.touched">
            Bitte w√§hlen Sie die Vertriebskomplexit√§t
          </mat-error>
        </div>

        <div class="form-group">
          <label class="form-label">{{ translate('pricing.implementation.implementationComplexity') }} *</label>
          <mat-radio-group formControlName="implementation" class="radio-group" required>
            <div class="radio-option" [class.selected]="pricingForm.get('implementation')?.value === 'standard'" (click)="pricingForm.get('implementation')?.setValue('standard')">
              <mat-radio-button value="standard">
                <div class="radio-text">
                  <strong>{{ translate('pricing.implementation.implementationComplexity.low') }}</strong>
                  <small>{{ translate('pricing.implementation.implementationComplexity.lowDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('implementation')?.value === 'extensive'" (click)="pricingForm.get('implementation')?.setValue('extensive')">
              <mat-radio-button value="extensive">
                <div class="radio-text">
                  <strong>{{ translate('pricing.implementation.implementationComplexity.high') }}</strong>
                  <small>{{ translate('pricing.implementation.implementationComplexity.highDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
          </mat-radio-group>
          <mat-error *ngIf="pricingForm.get('implementation')?.invalid && pricingForm.get('implementation')?.touched">
            Bitte w√§hlen Sie die Implementierungskomplexit√§t
          </mat-error>
        </div>

        <div class="form-group">
          <label class="form-label">Kundenbindung *</label>
          <mat-radio-group formControlName="customerFencing" class="radio-group" required>
            <div class="radio-option" [class.selected]="pricingForm.get('customerFencing')?.value === 'strong'" (click)="pricingForm.get('customerFencing')?.setValue('strong')">
              <mat-radio-button value="strong">
                <div class="radio-text">
                  <strong>Stark</strong>
                  <small>Hohe Wechselkosten, starke Bindung</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('customerFencing')?.value === 'weak'" (click)="pricingForm.get('customerFencing')?.setValue('weak')">
              <mat-radio-button value="weak">
                <div class="radio-text">
                  <strong>Schwach</strong>
                  <small>Geringe Wechselkosten, schwache Bindung</small>
                </div>
              </mat-radio-button>
            </div>
          </mat-radio-group>
          <mat-error *ngIf="pricingForm.get('customerFencing')?.invalid && pricingForm.get('customerFencing')?.touched">
            Bitte w√§hlen Sie die Kundenbindung
          </mat-error>
        </div>

        <!-- Bereitstellungsart -->
        <mat-divider style="margin: 20px 0;"></mat-divider>
        <h3>{{ translate('pricing.deploymentType') }}</h3>
        
        <div class="form-group">
          <label class="form-label">{{ translate('pricing.deploymentType') }} *</label>
          <mat-radio-group formControlName="deploymentType" class="radio-group" required>
            <div class="radio-option" [class.selected]="pricingForm.get('deploymentType')?.value === 'cloud'" (click)="pricingForm.get('deploymentType')?.setValue('cloud')">
              <mat-radio-button value="cloud">
                <div class="radio-text">
                  <strong>{{ translate('pricing.deployment.cloud') }}</strong>
                  <small>{{ translate('pricing.deployment.cloudDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('deploymentType')?.value === 'onpremises'" (click)="pricingForm.get('deploymentType')?.setValue('onpremises')">
              <mat-radio-button value="onpremises">
                <div class="radio-text">
                  <strong>{{ translate('pricing.deployment.onPremises') }}</strong>
                  <small>{{ translate('pricing.deployment.onPremisesDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
          </mat-radio-group>
          <mat-error *ngIf="pricingForm.get('deploymentType')?.invalid && pricingForm.get('deploymentType')?.touched">
            Bitte w√§hlen Sie eine Bereitstellungsart
          </mat-error>
        </div>

        <!-- Installationsgeb√ºhr (nur bei On-Premises) -->
        <div class="form-group" *ngIf="pricingForm.get('deploymentType')?.value === 'onpremises'">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Installationsgeb√ºhr</mat-label>
            <input matInput type="number" formControlName="installationFee">
            <span matSuffix>‚Ç¨</span>
            <mat-icon matSuffix matTooltip="Einmalige Geb√ºhr f√ºr die Vor-Ort-Installation und Einrichtung">info</mat-icon>
          </mat-form-field>
        </div>

        <!-- Vertriebskanal -->
        <div class="form-group">
          <label class="form-label">{{ translate('pricing.salesChannel') }} *</label>
          <mat-radio-group formControlName="salesChannel" class="radio-group" required>
            <div class="radio-option" [class.selected]="pricingForm.get('salesChannel')?.value === 'direct'" (click)="pricingForm.get('salesChannel')?.setValue('direct')">
              <mat-radio-button value="direct">
                <div class="radio-text">
                  <strong>{{ translate('pricing.sales.direct') }}</strong>
                  <small>{{ translate('pricing.sales.directDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('salesChannel')?.value === 'partner'" (click)="pricingForm.get('salesChannel')?.setValue('partner')">
              <mat-radio-button value="partner">
                <div class="radio-text">
                  <strong>{{ translate('pricing.sales.partner') }}</strong>
                  <small>{{ translate('pricing.sales.partnerDesc') }}</small>
                </div>
              </mat-radio-button>
            </div>
          </mat-radio-group>
          <mat-error *ngIf="pricingForm.get('salesChannel')?.invalid && pricingForm.get('salesChannel')?.touched">
            Bitte w√§hlen Sie einen Vertriebskanal
          </mat-error>
        </div>

        <!-- Partnerprovision (nur bei Partnervertrieb) -->
        <div class="form-group" *ngIf="pricingForm.get('salesChannel')?.value === 'partner'">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ translate('pricing.partnerCommission') }}</mat-label>
            <input matInput type="number" formControlName="partnerCommission" min="0" max="100">
            <span matSuffix>%</span>
            <mat-icon matSuffix [matTooltip]="translate('pricing.partnerCommissionTooltip')">info</mat-icon>
          </mat-form-field>
        </div>

        <!-- Dynamische Hinweise -->
        <div class="implementation-hints">
          <mat-card class="hints-card" *ngIf="pricingForm.get('deploymentType')?.value">
            <mat-card-header>
              <mat-card-title>{{ translate('pricing.deploymentHints.title') }}</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <div class="hint" *ngIf="pricingForm.get('deploymentType')?.value === 'cloud'">
                <mat-icon>cloud</mat-icon>
                <span>{{ translate('pricing.deploymentHints.cloud') }}</span>
              </div>
              <div class="hint" *ngIf="pricingForm.get('deploymentType')?.value === 'onpremises'">
                <mat-icon>computer</mat-icon>
                <span>{{ translate('pricing.deploymentHints.onPremises') }}</span>
              </div>
              <div class="hint" *ngIf="pricingForm.get('salesChannel')?.value === 'partner'">
                <mat-icon>handshake</mat-icon>
                <span>{{ translate('pricing.deploymentHints.partner') }}</span>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Phase 5: Gesch√§ftsmodell -->
  <div class="phase" *ngIf="currentPhase === 4">
    <mat-card class="strategy-card">
      <mat-card-header>
        <mat-card-title>Gesch√§ftsmodell</mat-card-title>
        <mat-card-subtitle>Erweiterte Gesch√§ftsmodell-Optionen und Preismodelle</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content [formGroup]="pricingForm">
        <div class="form-group">
          <label class="form-label">Upgrade-Pfad *</label>
          <mat-radio-group formControlName="upgradePath" class="radio-group" required>
            <div class="radio-option" [class.selected]="pricingForm.get('upgradePath')?.value === 'tiered'" (click)="pricingForm.get('upgradePath')?.setValue('tiered')">
              <mat-radio-button value="tiered">
                <div class="radio-text">
                  <strong>Gestaffelt</strong>
                  <small>Verschiedene Produktstufen mit Upgrade-M√∂glichkeiten</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('upgradePath')?.value === 'flat'" (click)="pricingForm.get('upgradePath')?.setValue('flat')">
              <mat-radio-button value="flat">
                <div class="radio-text">
                  <strong>Flach</strong>
                  <small>Einheitliches Produkt ohne Stufen</small>
                </div>
              </mat-radio-button>
            </div>
          </mat-radio-group>
          <mat-error *ngIf="pricingForm.get('upgradePath')?.invalid && pricingForm.get('upgradePath')?.touched">
            Bitte w√§hlen Sie den Upgrade-Pfad
          </mat-error>
        </div>

        <div class="form-group">
          <label class="form-label">Support-Intensit√§t</label>
          <div class="slider-container">
            <div class="slider-labels">
              <span>Minimal</span>
              <span>Maximal</span>
            </div>
            <div class="radio-group">
              <div class="radio-option" [class.selected]="pricingForm.get('supportIntensity')?.value === 1" (click)="pricingForm.get('supportIntensity')?.setValue(1)">
                <mat-radio-button value="1" (click)="$event.stopPropagation()">
                  <div class="radio-text">
                    <strong>Level 1 - Minimal</strong>
                    <small>Grundlegender Support, Selbstbedienung</small>
                  </div>
                </mat-radio-button>
              </div>
              <div class="radio-option" [class.selected]="pricingForm.get('supportIntensity')?.value === 2" (click)="pricingForm.get('supportIntensity')?.setValue(2)">
                <mat-radio-button value="2" (click)="$event.stopPropagation()">
                  <div class="radio-text">
                    <strong>Level 2 - Basis</strong>
                    <small>E-Mail Support, Dokumentation</small>
                  </div>
                </mat-radio-button>
              </div>
              <div class="radio-option" [class.selected]="pricingForm.get('supportIntensity')?.value === 3" (click)="pricingForm.get('supportIntensity')?.setValue(3)">
                <mat-radio-button value="3" (click)="$event.stopPropagation()">
                  <div class="radio-text">
                    <strong>Level 3 - Standard</strong>
                    <small>Telefon Support, Schulungen</small>
                  </div>
                </mat-radio-button>
              </div>
              <div class="radio-option" [class.selected]="pricingForm.get('supportIntensity')?.value === 4" (click)="pricingForm.get('supportIntensity')?.setValue(4)">
                <mat-radio-button value="4" (click)="$event.stopPropagation()">
                  <div class="radio-text">
                    <strong>Level 4 - Premium</strong>
                    <small>Dedizierter Support, 24/7 Verf√ºgbarkeit</small>
                  </div>
                </mat-radio-button>
              </div>
              <div class="radio-option" [class.selected]="pricingForm.get('supportIntensity')?.value === 5" (click)="pricingForm.get('supportIntensity')?.setValue(5)">
                <mat-radio-button value="5" (click)="$event.stopPropagation()">
                  <div class="radio-text">
                    <strong>Level 5 - Maximal</strong>
                    <small>Pers√∂nlicher Account Manager, On-Site Support</small>
                  </div>
                </mat-radio-button>
              </div>
            </div>
          </div>
        </div>

        <!-- Preismodell-Auswahl -->
        <mat-divider style="margin: 20px 0;"></mat-divider>
        <h3>Preismodell</h3>
        
        <div class="form-group">
          <label class="form-label">Preismodell *</label>
          <mat-radio-group formControlName="pricingModel" class="radio-group" required>
            <div class="radio-option" [class.selected]="pricingForm.get('pricingModel')?.value === 'license'" (click)="pricingForm.get('pricingModel')?.setValue('license')">
              <mat-radio-button value="license">
                <div class="radio-text">
                  <strong>Feste Lizenzgeb√ºhr</strong>
                  <small>J√§hrliche oder monatliche Pauschalgeb√ºhr</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('pricingModel')?.value === 'usage'" (click)="pricingForm.get('pricingModel')?.setValue('usage')">
              <mat-radio-button value="usage">
                <div class="radio-text">
                  <strong>Nutzungsbasiert</strong>
                  <small>Preis pro Analyse/Nutzung</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('pricingModel')?.value === 'hybrid'" (click)="pricingForm.get('pricingModel')?.setValue('hybrid')">
              <mat-radio-button value="hybrid">
                <div class="radio-text">
                  <strong>Hybrid-Modell</strong>
                  <small>Kombination aus Grundgeb√ºhr und Nutzungsgeb√ºhr</small>
                </div>
              </mat-radio-button>
            </div>
            <div class="radio-option" [class.selected]="pricingForm.get('pricingModel')?.value === 'dacs'" (click)="pricingForm.get('pricingModel')?.setValue('dacs')">
              <mat-radio-button value="dacs">
                <div class="radio-text">
                  <strong>Komplexit√§tsabh√§ngig (DACS)</strong>
                  <small>Preis abh√§ngig von der Fallkomplexit√§t</small>
                </div>
              </mat-radio-button>
            </div>
          </mat-radio-group>
          <mat-error *ngIf="pricingForm.get('pricingModel')?.invalid && pricingForm.get('pricingModel')?.touched">
            Bitte w√§hlen Sie ein Preismodell
          </mat-error>
        </div>

        <!-- Preiseingaben basierend auf gew√§hltem Modell -->
        <div class="pricing-inputs">
          <!-- Lizenzmodell -->
          <div class="pricing-section" *ngIf="pricingForm.get('pricingModel')?.value === 'license'">
            <h4>Lizenzmodell - Preiseingaben</h4>
            <div class="form-group">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Basispreis pro Jahr</mat-label>
                <input matInput type="number" formControlName="basePrice">
                <span matSuffix>‚Ç¨</span>
                <mat-icon matSuffix matTooltip="J√§hrliche Lizenzgeb√ºhr f√ºr das System">info</mat-icon>
              </mat-form-field>
            </div>
          </div>

          <!-- Nutzungsbasiert -->
          <div class="pricing-section" *ngIf="pricingForm.get('pricingModel')?.value === 'usage'">
            <h4>Nutzungsbasiert - Preiseingaben</h4>
            <div class="form-group">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Preis pro Nutzung</mat-label>
                <input matInput type="number" formControlName="basePrice">
                <span matSuffix>‚Ç¨</span>
                <mat-icon matSuffix matTooltip="Preis pro einzelne Analyse/Nutzung">info</mat-icon>
              </mat-form-field>
            </div>
          </div>

          <!-- Hybrid-Modell -->
          <div class="pricing-section" *ngIf="pricingForm.get('pricingModel')?.value === 'hybrid'">
            <h4>Hybrid-Modell - Preiseingaben</h4>
            <div class="hybrid-inputs">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Grundgeb√ºhr pro Jahr</mat-label>
                <input matInput type="number" formControlName="hybridBaseFee">
                <span matSuffix>‚Ç¨</span>
                <mat-icon matSuffix matTooltip="Feste j√§hrliche Grundgeb√ºhr">info</mat-icon>
              </mat-form-field>
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Nutzungsgeb√ºhr pro Fall</mat-label>
                <input matInput type="number" formControlName="hybridUsageFee">
                <span matSuffix>‚Ç¨</span>
                <mat-icon matSuffix matTooltip="Zus√§tzliche Geb√ºhr pro Analyse">info</mat-icon>
              </mat-form-field>
            </div>
          </div>

          <!-- DACS-Modell -->
          <div class="pricing-section" *ngIf="pricingForm.get('pricingModel')?.value === 'dacs'">
            <h4>DACS-Modell - Preiseingaben</h4>
            <div class="form-group">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Basispreis (f√ºr durchschnittliche Komplexit√§t)</mat-label>
                <input matInput type="number" formControlName="dacsBasePrice">
                <span matSuffix>‚Ç¨</span>
                <mat-icon matSuffix matTooltip="Preis f√ºr einen Fall mit durchschnittlicher Komplexit√§t (Score 3)">info</mat-icon>
              </mat-form-field>
            </div>
            
            <!-- DACS-Preisspanne anzeigen -->
            <div class="dacs-preview" *ngIf="pricingForm.get('dacsBasePrice')?.value > 0">
              <mat-card class="preview-card">
                <mat-card-header>
                  <mat-card-title>DACS-Preisspanne</mat-card-title>
                  <mat-card-subtitle>Basierend auf Ihrem Komplexit√§ts-Score von {{ calculateComplexityScore() }}/20</mat-card-subtitle>
                </mat-card-header>
                <mat-card-content>
                  <div class="price-range">
                    <div class="price-item">
                      <span class="price-label">Einfache F√§lle (Score 1-2):</span>
                      <span class="price-value">{{ calculateDACSPrices().simple | number:'1.2-2' }} ‚Ç¨</span>
                    </div>
                    <div class="price-item">
                      <span class="price-label">Mittlere F√§lle (Score 3):</span>
                      <span class="price-value">{{ calculateDACSPrices().medium | number:'1.2-2' }} ‚Ç¨</span>
                    </div>
                    <div class="price-item">
                      <span class="price-label">Komplexe F√§lle (Score 4-5):</span>
                      <span class="price-value">{{ calculateDACSPrices().complex | number:'1.2-2' }} ‚Ç¨</span>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>
            </div>
          </div>
        </div>

        <!-- Gewinnmarge -->
        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ translate('pricing.profitMargin') }}</mat-label>
            <input matInput type="number" formControlName="profitMargin" min="0" max="100">
            <span matSuffix>%</span>
            <mat-icon matSuffix [matTooltip]="translate('pricing.profitMarginTooltip')">info</mat-icon>
          </mat-form-field>
        </div>

        <!-- Automatische Modell-Empfehlung -->
        <div class="model-recommendation" *ngIf="pricingForm.get('deploymentType')?.value && pricingForm.get('salesChannel')?.value">
          <mat-card class="recommendation-card">
            <mat-card-header>
              <mat-card-title>{{ translate('pricing.modelRecommendation.title') }}</mat-card-title>
              <mat-card-subtitle>{{ translate('pricing.modelRecommendation.subtitle') }}</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <div class="recommendation-content">
                <div class="recommendation-text" *ngIf="getModelRecommendation()">
                  <mat-icon>lightbulb</mat-icon>
                  <span>{{ getModelRecommendation() }}</span>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Phase 6: Ergebnisse -->
  <div class="phase" *ngIf="currentPhase === 5">
    <div class="results-container" *ngIf="results.systemType">
      <div class="result-section">
        <span class="system-type-badge" [class]="pricingForm.get('autonomy')?.value || 'assistive'">
          {{ results.systemType }}
        </span>
        <h3>EMPFOHLENE PRICING-STRATEGIE f√ºr "{{ pricingForm.get('systemName')?.value || 'Ihr DDSS' }}"</h3>
        
        <h4>SYSTEMCHARAKTERISIERUNG</h4>
        <div class="result-item">
          <span class="result-label">Autonomie-Level:</span>
          <span class="result-value">{{ getAutonomyLabel(pricingForm.get('autonomy')?.value) }}</span>
        </div>
        <div class="result-item">
          <span class="result-label">Messbarkeit:</span>
          <span class="result-value">{{ getMeasurabilityLabel(pricingForm.get('measurability')?.value) }}</span>
        </div>
        <div class="result-item">
          <span class="result-label">Inferenzkosten:</span>
          <span class="result-value">{{ getInferenceCostsLabel(pricingForm.get('inferenceCosts')?.value) }}</span>
        </div>
        <div class="result-item">
          <span class="result-label">Komplexit√§ts-Score:</span>
          <span class="result-value">{{ calculateComplexityScore() }}/20 ({{ getComplexityLevel() | titlecase }})</span>
        </div>

        <h4>MARKTPOSITIONIERUNG</h4>
        <div class="result-item">
          <span class="result-label">Prim√§rer Sektor:</span>
          <span class="result-value">{{ getSectorLabel(pricingForm.get('sector')?.value) }}</span>
        </div>
        <div class="result-item">
          <span class="result-label">Erstattungsintegration:</span>
          <span class="result-value">{{ pricingForm.get('reimbursement')?.value === 'yes' ? 'Ja (GO√Ñ/EBM)' : 'Nein' }}</span>
        </div>
        <div class="result-item">
          <span class="result-label">Vertriebskomplexit√§t:</span>
          <span class="result-value">{{ getSalesEffortLabel(pricingForm.get('salesEffort')?.value) }}</span>
        </div>
        <div class="result-item">
          <span class="result-label">Bereitstellungsart:</span>
          <span class="result-value">{{ pricingForm.get('deploymentType')?.value === 'cloud' ? 'Cloud-Service' : 'On-Premises' }}</span>
        </div>
        <div class="result-item">
          <span class="result-label">Vertriebskanal:</span>
          <span class="result-value">{{ pricingForm.get('salesChannel')?.value === 'direct' ? 'Direktvertrieb' : 'Partner/Distributor' }}</span>
        </div>
      </div>

      <!-- Kostenbasis -->
      <div class="result-section">
        <h4>KOSTENBASIS</h4>
        <div class="cost-breakdown">
          <div class="cost-item">
            <span class="cost-label">Selbstkosten pro Fall:</span>
            <span class="cost-value">{{ calculateCostPerCase() | number:'1.2-2' }} ‚Ç¨</span>
          </div>
          <div class="cost-breakdown-details">
            <small>
              ‚Ä¢ Amortisierte Entwicklungskosten: {{ (pricingForm.get('developmentCosts')?.value || 0) / ((pricingForm.get('expectedCasesPerYear')?.value || 100) * (pricingForm.get('amortizationPeriod')?.value || 5)) | number:'1.2-2' }} ‚Ç¨<br>
              ‚Ä¢ Kosten pro Nutzung: {{ pricingForm.get('costPerUsage')?.value || 0 | number:'1.2-2' }} ‚Ç¨<br>
              ‚Ä¢ Wartungskosten pro Fall: {{ (pricingForm.get('maintenanceCosts')?.value || 0) / (pricingForm.get('expectedCasesPerYear')?.value || 100) | number:'1.2-2' }} ‚Ç¨
            </small>
          </div>
          <div class="cost-item">
            <span class="cost-label">Gewinnmarge:</span>
            <span class="cost-value">{{ pricingForm.get('profitMargin')?.value || 20 }}%</span>
          </div>
          <div class="cost-item">
            <span class="cost-label">Empfohlener Verkaufspreis:</span>
            <span class="cost-value">{{ (calculateCostPerCase() * (1 + (pricingForm.get('profitMargin')?.value || 20) / 100)) | number:'1.2-2' }} ‚Ç¨</span>
          </div>
        </div>
      </div>

      <!-- Marktvergleich -->
      <div class="result-section" *ngIf="competitorsArray.length > 0 || pricingForm.get('alternativeMethodCosts')?.value > 0">
        <h4>MARKTVERGLEICH</h4>
        <div class="market-comparison-results">
          <div class="market-stats-results" *ngIf="competitorsArray.length > 0">
            <div class="market-stat-item">
              <span class="market-stat-label">Durchschnittlicher Konkurrenzpreis:</span>
              <span class="market-stat-value">{{ calculateMarketStats().avg | number:'1.2-2' }} ‚Ç¨</span>
            </div>
            <div class="market-stat-item">
              <span class="market-stat-label">Marktpreisspanne:</span>
              <span class="market-stat-value">{{ calculateMarketStats().min | number:'1.2-2' }} - {{ calculateMarketStats().max | number:'1.2-2' }} ‚Ç¨</span>
            </div>
            <div class="market-stat-item" [class.warning]="calculateCostPerCase() > calculateMarketStats().max">
              <span class="market-stat-label">Ihr Preis vs. Markt:</span>
              <span class="market-stat-value">
                {{ calculateCostPerCase() | number:'1.2-2' }} ‚Ç¨ 
                ({{ ((calculateCostPerCase() / calculateMarketStats().avg - 1) * 100) | number:'+1.0-1' }}% vs. Durchschnitt)
              </span>
            </div>
          </div>
          <div class="alternative-method" *ngIf="pricingForm.get('alternativeMethodCosts')?.value > 0">
            <div class="market-stat-item">
              <span class="market-stat-label">Konventionelle Methode:</span>
              <span class="market-stat-value">{{ pricingForm.get('alternativeMethodCosts')?.value | number:'1.2-2' }} ‚Ç¨</span>
            </div>
            <div class="market-stat-item">
              <span class="market-stat-label">Einsparung f√ºr Kunden:</span>
              <span class="market-stat-value">{{ ((pricingForm.get('alternativeMethodCosts')?.value || 0) - calculateCostPerCase()) | number:'1.2-2' }} ‚Ç¨ pro Fall</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Preisempfehlung & Modell -->
      <div class="recommendation-box">
        <h4>PREISEMPFEHLUNG & MODELL</h4>
        <div class="pricing-model-details">
          <div class="pricing-model-card">
            <h5>Gew√§hltes Preismodell</h5>
            <p>{{ getPricingModelLabel(pricingForm.get('pricingModel')?.value) }}</p>
          </div>
          <div class="pricing-model-card" *ngIf="pricingForm.get('pricingModel')?.value === 'license'">
            <h5>Empfohlener Preis</h5>
            <p>{{ pricingForm.get('basePrice')?.value | number:'1.2-2' }} ‚Ç¨ pro Jahr (Festlizenz)</p>
          </div>
          <div class="pricing-model-card" *ngIf="pricingForm.get('pricingModel')?.value === 'usage'">
            <h5>Empfohlener Preis</h5>
            <p>{{ pricingForm.get('basePrice')?.value | number:'1.2-2' }} ‚Ç¨ pro Analyse</p>
          </div>
          <div class="pricing-model-card" *ngIf="pricingForm.get('pricingModel')?.value === 'hybrid'">
            <h5>Empfohlener Preis</h5>
            <p>{{ pricingForm.get('hybridBaseFee')?.value | number:'1.2-2' }} ‚Ç¨ Grundgeb√ºhr/Jahr + {{ pricingForm.get('hybridUsageFee')?.value | number:'1.2-2' }} ‚Ç¨ pro Nutzung</p>
          </div>
          <div class="pricing-model-card" *ngIf="pricingForm.get('pricingModel')?.value === 'dacs'">
            <h5>Empfohlener Preis (DACS)</h5>
            <p>Dynamischer Preis pro Fall nach Komplexit√§t:</p>
            <ul>
              <li>Einfache F√§lle: {{ calculateDACSPrices().simple | number:'1.2-2' }} ‚Ç¨</li>
              <li>Mittlere F√§lle: {{ calculateDACSPrices().medium | number:'1.2-2' }} ‚Ç¨</li>
              <li>Komplexe F√§lle: {{ calculateDACSPrices().complex | number:'1.2-2' }} ‚Ç¨</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Zus√§tzliche Kennzahlen -->
      <div class="result-section">
        <h4>ZUS√ÑTZLICHE KENNZAHLEN</h4>
        <div class="additional-metrics">
          <div class="metric-item" *ngIf="pricingForm.get('developmentCosts')?.value > 0 && pricingForm.get('basePrice')?.value > 0">
            <span class="metric-label">Break-even-Punkt:</span>
            <span class="metric-value">ca. {{ Math.ceil((pricingForm.get('developmentCosts')?.value || 0) / (pricingForm.get('basePrice')?.value || 1)) }} Nutzungen</span>
          </div>
          <div class="metric-item" *ngIf="pricingForm.get('expectedCasesPerYear')?.value > 0 && pricingForm.get('basePrice')?.value > 0">
            <span class="metric-label">J√§hrlicher Erl√∂s (bei {{ pricingForm.get('expectedCasesPerYear')?.value }} F√§llen):</span>
            <span class="metric-value">{{ ((pricingForm.get('basePrice')?.value || 0) * (pricingForm.get('expectedCasesPerYear')?.value || 0)) | number:'1.2-2' }} ‚Ç¨</span>
          </div>
          <div class="metric-item" *ngIf="pricingForm.get('partnerCommission')?.value > 0">
            <span class="metric-label">Partnerprovision ({{ pricingForm.get('partnerCommission')?.value }}%):</span>
            <span class="metric-value">{{ ((pricingForm.get('basePrice')?.value || 0) * (pricingForm.get('partnerCommission')?.value || 0) / 100) | number:'1.2-2' }} ‚Ç¨ pro Verkauf</span>
          </div>
          <div class="metric-item" *ngIf="pricingForm.get('installationFee')?.value > 0">
            <span class="metric-label">Installationsgeb√ºhr:</span>
            <span class="metric-value">{{ pricingForm.get('installationFee')?.value | number:'1.2-2' }} ‚Ç¨ (einmalig)</span>
          </div>
        </div>
      </div>

      <!-- DACS-Erkl√§rung -->
      <div class="result-section" *ngIf="pricingForm.get('pricingModel')?.value === 'dacs'">
        <h4>DACS-ERKL√ÑRUNG</h4>
        <div class="dacs-explanation">
          <p>Das DACS-Modell (Dynamic Adaptive Complexity-based Scoring) erm√∂glicht eine faire Preisgestaltung basierend auf der tats√§chlichen Komplexit√§t jedes Falls:</p>
          
          <div class="dacs-details">
            <h5>Ihr aktueller Komplexit√§tsscore: {{ calculateComplexityScore() }}/100 ({{ getComplexityLevel() }})</h5>
            <p>Basierend auf Ihrer Eingabe wird der folgende Preis empfohlen:</p>
            
            <div class="dacs-price-display">
              <div class="price-item">
                <span class="price-label">Empfohlener DACS-Preis:</span>
                <span class="price-value">{{ calculateDACSPrices().dynamic | number:'1.2-2' }}‚Ç¨</span>
              </div>
            </div>
            
            <h5>Preisspanne f√ºr verschiedene Komplexit√§tsstufen:</h5>
            <ul>
              <li><strong>Einfache F√§lle (Score 20-40):</strong> {{ calculateDACSPrices().simple | number:'1.2-2' }}‚Ç¨ - Standard-Diagnosen mit geringem AI-Aufwand</li>
              <li><strong>Mittlere F√§lle (Score 41-60):</strong> {{ calculateDACSPrices().medium | number:'1.2-2' }}‚Ç¨ - Komplexere Analysen mit moderatem AI-Aufwand</li>
              <li><strong>Komplexe F√§lle (Score 61-100):</strong> {{ calculateDACSPrices().complex | number:'1.2-2' }}‚Ç¨ - Hochkomplexe Diagnosen mit hohem AI-Aufwand</li>
            </ul>
            
            <div class="dacs-benefits">
              <h5>Vorteile des DACS-Modells:</h5>
              <ul>
                <li><strong>Faire Preisgestaltung:</strong> Kunden zahlen nur f√ºr die tats√§chliche Komplexit√§t</li>
                <li><strong>Transparenz:</strong> Klare Preisstruktur basierend auf objektiven Kriterien</li>
                <li><strong>Skalierbarkeit:</strong> Automatische Anpassung an verschiedene Anwendungsf√§lle</li>
                <li><strong>Wettbewerbsvorteil:</strong> Differenzierung durch intelligente Preisgestaltung</li>
              </ul>
            </div>
            
            <div class="dacs-calculation">
              <h5>Berechnungsgrundlage:</h5>
              <p>Basispreis: {{ calculateDACSPrices().basePrice | number:'1.2-2' }}‚Ç¨</p>
              <p>Gewinnmarge: {{ pricingForm.get('profitMargin')?.value || 20 }}%</p>
              <p>Preisspanne: {{ calculateDACSPrices().priceRange.min | number:'1.2-2' }}‚Ç¨ - {{ calculateDACSPrices().priceRange.max | number:'1.2-2' }}‚Ç¨</p>
              <p>Spannweite: {{ calculateDACSPrices().priceRange.spread | number:'1.2-2' }}‚Ç¨</p>
            </div>
          </div>
        </div>
      </div>

      <div class="risk-factors" *ngIf="results.risks?.length > 0">
        <h4>RISIKOFAKTOREN & EMPFEHLUNGEN</h4>
        <div class="risk-item" *ngFor="let risk of results.risks">‚Ä¢ {{ risk }}</div>
      </div>

      <div class="form-group">
        <button mat-raised-button color="primary" (click)="exportPDF()" class="btn btn--primary">
          <mat-icon>print</mat-icon>
          PDF Export
        </button>
        <button mat-raised-button color="accent" (click)="exportJSON()" class="btn btn--secondary">
          <mat-icon>download</mat-icon>
          JSON Export
        </button>
      </div>
    </div>
  </div>

  <!-- Navigation -->
  <div class="form-navigation">
    <button mat-button (click)="previousPhase()" class="btn btn--outline" *ngIf="isPrevButtonVisible()">
      ‚Üê {{ translate('common.back') }}
    </button>
    <button mat-raised-button color="primary" (click)="nextPhase()" class="btn btn--primary" *ngIf="isNextButtonVisible()">
      {{ getNextButtonText() }}
    </button>
  </div>
</div>
