<h2>{{ translate('nav.overview') }}</h2>

<!-- Mobile Ansicht als Karten/BlÃ¶cke -->
<div *ngIf="isMobile; else desktopTable">
  <div *ngIf="(scoreResults$ | async) as results; else loading">
    <div *ngIf="results.length > 0; else noResults">
      <div *ngFor="let result of results" class="score-mobile-card mat-elevation-z2">
        <div class="score-mobile-row">
          <strong>{{ translate('score.name') }}:</strong> <span>{{ result.name || result.evaluationId }}</span>
        </div>
        <div class="score-mobile-row">
          <strong>{{ translate('score.totalScore') }}:</strong> <span>{{ result.totalScore }}</span>
        </div>
        <div class="score-mobile-row actions">
          <button mat-raised-button color="primary" (click)="viewDetails(result.evaluationId)">
            <mat-icon>visibility</mat-icon> {{ translate('common.details') }}
          </button>
          <button mat-raised-button color="warn" (click)="deleteEvaluation(result.evaluationId)" class="ml-2">
            <mat-icon>delete</mat-icon> {{ translate('common.delete') }}
          </button>
          <button mat-raised-button color="accent" (click)="editScore(result.evaluationId)" class="ml-2">
            <mat-icon>edit</mat-icon> {{ translate('common.edit') }}
          </button>
        </div>
      </div>
    </div>
    <ng-template #noResults>
      <mat-card>
        <mat-card-content>
          <p>{{ translate('common.noResults') }}</p>
        </mat-card-content>
      </mat-card>
    </ng-template>
  </div>
</div>

<!-- Desktop Ansicht als Tabelle -->
<ng-template #desktopTable>
  <div *ngIf="(scoreResults$ | async) as results; else loading">
    <div *ngIf="results.length > 0; else noResults">
      <table mat-table [dataSource]="results" class="mat-elevation-z4">
        <!-- Evaluation ID Column -->
        <ng-container matColumnDef="evaluationId">
          <th mat-header-cell *matHeaderCellDef>{{ translate('score.name') }}</th>
          <td mat-cell *matCellDef="let result">{{ result.name || result.evaluationId }}</td>
        </ng-container>

        <!-- Total Score Column -->
        <ng-container matColumnDef="totalScore">
          <th mat-header-cell *matHeaderCellDef>{{ translate('score.totalScore') }}</th>
          <td mat-cell *matCellDef="let result">{{ result.totalScore }}</td>
        </ng-container>

        <!-- Actions Column -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>{{ translate('score.actions') }}</th>
          <td mat-cell *matCellDef="let result">
            <button mat-raised-button color="primary" (click)="viewDetails(result.evaluationId)">
              <mat-icon>visibility</mat-icon> {{ translate('common.details') }}
            </button>
            <button mat-raised-button color="warn" (click)="deleteEvaluation(result.evaluationId)" class="ml-2">
              <mat-icon>delete</mat-icon> {{ translate('common.delete') }}
            </button>
            <button mat-raised-button color="accent" (click)="editScore(result.evaluationId)" class="ml-2">
              <mat-icon>edit</mat-icon> {{ translate('common.edit') }}
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="['evaluationId', 'totalScore', 'actions']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['evaluationId', 'totalScore', 'actions']"></tr>
      </table>
    </div>
    <ng-template #noResults>
      <mat-card>
        <mat-card-content>
          <p>{{ translate('common.noResults') }}</p>
        </mat-card-content>
      </mat-card>
    </ng-template>
  </div>
</ng-template>

<ng-template #loading>
  <div class="loading-indicator">
    <mat-spinner diameter="40"></mat-spinner>
    <p>{{ translate('common.loading') }}</p>
  </div>
</ng-template>
